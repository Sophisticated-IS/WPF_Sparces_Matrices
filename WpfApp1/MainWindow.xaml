<controls:MetroWindow
                          xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                          xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                          xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                          xmlns:controls="http://metro.mahapps.com/winfx/xaml/controls"
                          xmlns:m="http://materialdesigninxaml.net/winfx/xaml/themes"
                          xmlns:f="clr-namespace:ControlzEx;assembly=MaterialDesignThemes.Wpf"
                          x:Class="WpfApp1.MainWindow"
                          xmlns:dg2d="clr-namespace:DataGrid2DLibrary;assembly=DataGrid2DLibrary"
                          mc:Ignorable ="d"
                          Title="Работай с удовольствием с Fast_Matrix"
                          d:DesignHeight ="600"
                          d:DesignWidth="800"
                          Width="600"
                          Height="600"
                          >

    <controls:MetroWindow.Resources>
        <Style x:Key="FontStyleExp">
            <Setter Property= "Control.FontSize" Value = "14" />

        </Style>
        <Style TargetType="{x:Type controls:MetroTabItem}" x:Key ="TabPageTemplate" >
            <Setter Property="Background" Value="Blue"/>
            <Setter Property="Foreground" Value="BlueViolet"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        <Style x:Key="CircleButton" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ButtonBase}">
                        <Border x:Name="border" CornerRadius="1000" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                            <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" ContentStringFormat="{TemplateBinding ContentStringFormat}" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="Button.IsDefaulted" Value="True">
                                <Setter Property="BorderBrush" TargetName="border" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" TargetName="border" Value="#FFBEE6FD"/>
                                <Setter Property="BorderBrush" TargetName="border" Value="#FF3C7FB1"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" TargetName="border" Value="#FFC4E5F6"/>
                                <Setter Property="BorderBrush" TargetName="border" Value="#FF2C628B"/>
                            </Trigger>
                            <Trigger Property="ToggleButton.IsChecked" Value="True">
                                <Setter Property="Background" TargetName="border" Value="#FFBCDDEE"/>
                                <Setter Property="BorderBrush" TargetName="border" Value="#FF245A83"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" TargetName="border" Value="#FFF4F4F4"/>
                                <Setter Property="BorderBrush" TargetName="border" Value="#FFADB2B5"/>
                                <Setter Property="Foreground" Value="#FF838383"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <ControlTemplate x:Key="ComboBoxToggleButton" TargetType="ToggleButton">
            <Grid x:Name="gd">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="25" />
                </Grid.ColumnDefinitions>
                <Border x:Name="Border" SnapsToDevicePixels="True" Grid.ColumnSpan="2" Background="White" BorderBrush="Black" BorderThickness="1"/>
                <Border x:Name="Boredr1" SnapsToDevicePixels="True" Grid.Column="1"  Margin="1" Background="LightGoldenrodYellow" BorderBrush="Black" BorderThickness="0,0,1,0" />
                <Path x:Name="Arrow" SnapsToDevicePixels="True" Grid.Column="1" Fill="#FFD4D040" HorizontalAlignment="Center" VerticalAlignment="Center" Data="M 0 0 L 6 6 L 12 0 Z"/>
                <ContentPresenter Grid.Column="0" TextElement.Foreground="Orange"></ContentPresenter>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="ToggleButton.IsMouseOver" Value="True">
                    <Setter TargetName="Border" Property="BorderBrush" Value="Black"/>
                    <Setter TargetName="Boredr1" Property="BorderBrush" Value="Black"/>
                </Trigger>
                <Trigger Property="ToggleButton.IsChecked" Value="True">
                    <Setter TargetName="Arrow" Property="Data" Value="M 0 0 L 5 5 L 10 0"/>
                    <Setter TargetName="Arrow" Property="Fill" Value="White"/>
                    <Setter TargetName="Arrow" Property="Stroke" Value="White"/>
                    <Setter TargetName="Arrow" Property="StrokeThickness" Value="1.5"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter TargetName="gd" Property="Visibility" Value="Visible"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <!--TextBox Template-->
        <ControlTemplate x:Key="ComboBoxTextBox" TargetType="TextBox">
            <ScrollViewer x:Name="PART_ContentHost" Focusable="False" />
        </ControlTemplate>

        <!--combobox-->
        <Style x:Key="combobox_style" TargetType="ComboBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate  TargetType="ComboBox">
                        <Grid>
                            <ToggleButton Name="ToggleButton" Foreground="Black" Template="{StaticResource ComboBoxToggleButton}" Focusable="false" IsChecked="{Binding Path=IsDropDownOpen,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}" ClickMode="Press">
                            </ToggleButton>
                            <ContentPresenter Name="ContentSite" IsHitTestVisible="False" Content="{TemplateBinding SelectionBoxItem}" ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" Margin="3,3,23,3"  VerticalAlignment="Center" HorizontalAlignment="Left" />
                            <TextBox OverridesDefaultStyle="True" SelectionBrush="Gray" CaretBrush="Black" Margin="0,0,30,0" TextWrapping="NoWrap"   x:Name="PART_EditableTextBox" FontFamily="Segoe UI Dark"   Foreground="Black" Style="{x:Null}" Template="{StaticResource ComboBoxTextBox}" HorizontalAlignment="Left" Focusable="True"  VerticalAlignment="Center"  FontSize="15"   Visibility="Hidden" IsReadOnly="{TemplateBinding IsReadOnly}"/>
                            <Popup Name="Popup"  Grid.ColumnSpan="2" Placement="Bottom"  IsOpen="{TemplateBinding IsDropDownOpen}" AllowsTransparency="True" Focusable="False" PopupAnimation="Slide">
                                <Grid Name="DropDown"   SnapsToDevicePixels="True" MaxWidth="{TemplateBinding ActualWidth}" MinWidth="{TemplateBinding ActualWidth}" MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                    <Border Grid.ColumnSpan="2" Grid.RowSpan="2" x:Name="DropDownBorder" SnapsToDevicePixels="True" Background="Transparent" MaxWidth="{TemplateBinding ActualWidth}" BorderThickness="1" BorderBrush="Black"/>
                                    <ScrollViewer Grid.ColumnSpan="2" ScrollViewer.CanContentScroll="False" Grid.Row="1" SnapsToDevicePixels="True">
                                        <StackPanel IsItemsHost="True" Background="Transparent">
                                        </StackPanel>
                                    </ScrollViewer>
                                </Grid>
                            </Popup>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEditable" Value="true">
                                <Setter Property="IsTabStop" Value="false"/>
                                <Setter  TargetName="PART_EditableTextBox" Property="Background" Value="White"/>
                                <Setter TargetName="PART_EditableTextBox" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="PART_EditableTextBox" Property="Foreground" Value="Black"/>
                                <Setter TargetName="ContentSite" Property="Visibility" Value="Hidden"/>
                            </Trigger>
                            <Trigger Property="HasItems" Value="false">
                                <Setter TargetName="DropDownBorder" Property="MinHeight" Value="95"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="IsTabStop" Value="false"/>
                                <Setter TargetName="PART_EditableTextBox" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="PART_EditableTextBox" Property="Foreground" Value="Black"/>
                                <Setter  TargetName="PART_EditableTextBox" Property="IsEnabled" Value="False"/>
                                <Setter  TargetName="PART_EditableTextBox" Property="Background" Value="White"/>
                                <Setter TargetName="ContentSite" Property="Visibility" Value="Hidden"/>
                            </Trigger>
                            <Trigger Property="IsGrouping" Value="true">
                                <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                            </Trigger>
                            <Trigger SourceName="Popup" Property="Popup.AllowsTransparency" Value="true">
                                <Setter TargetName="DropDownBorder" Property="Margin" Value="0,2,0,0"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
            </Style.Triggers>
        </Style>
    </controls:MetroWindow.Resources>

    <Grid>

        <controls:MetroTabControl >

            <controls:MetroTabItem Header="Вычисление выражения" >
                <Grid Background="#FFE5E5E5">

                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Border BorderBrush="Brown" BorderThickness="3">
                        <Grid  Grid.Row="0" Background="LightBlue">
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>

                            </Grid.RowDefinitions>
                            <Grid Grid.Row="0">
                                <GroupBox Header="Выражение ->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->" 
                                          BorderThickness="0">
                                    <DockPanel LastChildFill="True">
                                        <Button BorderBrush="Black" BorderThickness="3" Content="=" FontSize="30" FontWeight="UltraBold" Foreground="Red" DockPanel.Dock="Right" Background="#FFB46EBA"/>
                                        <TextBox  Padding="10" FontSize="20" FontWeight="UltraBlack" TextAlignment="Center" Text="A+B+G*E^-1"
                                                  Background="#FFF1A4A4" BorderBrush="#FF110B0B"  CaretBrush="#FF050359" SelectionBrush="#FF2A85AE" Foreground="#FF6217A5">
                                         </TextBox>


                                    </DockPanel>
                                </GroupBox>
                            </Grid>

                            <Grid Grid.Row="1">


                                <StackPanel>
                                    <TextBlock Padding="0,0,0,3" HorizontalAlignment="Left">
                                        <Run FontSize="12" Foreground="DarkSeaGreen">
                                         ✅    
                                        </Run>
                                        <Run FontSize="14" FontWeight="DemiBold">
                                            Ошибок НЕТ
                                        </Run>
                                    </TextBlock>

                                    <Expander BorderThickness="0" Header="Действия:" IsExpanded="True">
                                        <Expander.Background>
                                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                                <GradientStop Color="Black" Offset="0"/>
                                                <GradientStop Color="#FF6F5FB0" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Expander.Background>

                                        <UniformGrid  Columns="4" Rows="1"  VerticalAlignment="Bottom" HorizontalAlignment="Center">
                                            <Button Content="➕"  MaxHeight="400" MaxWidth="400" FontSize="25" BorderBrush="Black" Background="#FFAA96D7" FontWeight="Bold"/>
                                            <Button ToolTip="Получение обратной матрицы" Content="A^-1" MaxHeight="400" MaxWidth="400" FontSize="25" BorderBrush="Black"  Background="#FFAA96D7"   FontWeight="Bold"/>
                                            <Button Content="✕"   MaxHeight="400" MaxWidth="400" FontSize="25" BorderBrush="Black"  Background="#FFAA96D7"  FontWeight="Bold"/>
                                            <Button Content="➖"  MaxHeight="400" MaxWidth="400" FontSize="25" BorderBrush="Black" Background="#FFAA96D7"  FontWeight="Bold"/>
                                        </UniformGrid>

                                    </Expander>
                                </StackPanel>




                            </Grid>

                        </Grid>
                    </Border>
                    <Grid Grid.Row="1">

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition  Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto" />
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <Grid   Grid.Row ="0" >
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="1*"/>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition Width="1*"/>

                            </Grid.ColumnDefinitions>
                            <Grid Grid.Column="0" HorizontalAlignment="Left">
                                <StackPanel Orientation="Horizontal">
                                    <ComboBox Style="{StaticResource combobox_style}"   FontSize="25" FontWeight="SemiBold" MinWidth="150" MaxWidth="350" Background="LightGoldenrodYellow">
                                        <ComboBoxItem Content="A"/>
                                        <ComboBoxItem Content="B"/>
                                        <ComboBoxItem Content="C"/>
                                        <ComboBoxItem Content="D"/>
                                        <ComboBoxItem Content="Matrix1"/>

                                    </ComboBox>

                                    <Border CornerRadius="50"
                                    Width="60"
                                    Margin="10"
                                    Padding="4"
                                    BorderBrush="Black"
                                    BorderThickness="1">
                                        <Border.Background>
                                            <RadialGradientBrush>
                                                <GradientStop Color="#FF7C20DC" Offset="0.993"/>
                                                <GradientStop Color="#FE27A1CE" Offset="0.666"/>
                                                <GradientStop Color="#FEEBF6FA" Offset="0.61"/>
                                            </RadialGradientBrush>
                                        </Border.Background>
                                        <TextBlock FontSize="25" FontWeight="Black"  HorizontalAlignment="Center">0</TextBlock>
                                    </Border>

                                </StackPanel>
                            </Grid>
                            <Grid Grid.Column="1">
                               
                                <TextBlock  Background="#FF6BB7F9" HorizontalAlignment="Center" VerticalAlignment="Center"  FontSize="28" FontWeight="DemiBold" >
                                            Матрица "Matrix1"
                                </TextBlock>
                            </Grid>
                            <Grid Grid.Column="2" HorizontalAlignment="Right">
                                <StackPanel   DockPanel.Dock="Right" Orientation="Horizontal">
                                    <Button Width="50" Height="50" Margin="10" Style="{StaticResource CircleButton}" Foreground="Violet"  FontWeight="Bold" >
                                        <Button.Background>
                                            <RadialGradientBrush>
                                                <GradientStop Color="#FF08F0FD" Offset="0.735"/>
                                                <GradientStop Color="#FF0F51B1" Offset="0.522"/>
                                                <GradientStop Color="#FF0F51B1" Offset="0.686"/>
                                            </RadialGradientBrush>
                                        </Button.Background>

                                        <m:PackIcon  Kind="ArrowAll" Width="40" Height="40" />
                                    </Button>
                                    
                                    <Button MinWidth="10" Content="📂" FontStretch="UltraCondensed"  FontSize="25" FontWeight="Bold" Background="LightGoldenrodYellow"/>
                                    <Button MinWidth="10" Content="➕"  FontStretch="UltraCondensed" FontSize="25" FontWeight="Bold" Background="LightGoldenrodYellow"/>
                                </StackPanel>
                            </Grid>

                        </Grid>

                        <Grid Grid.Row="1">
                            <dg2d:DataGrid2D Name="dataGrid2D" FontSize="20" Background="#E9AE0BD3" VerticalScrollBarVisibility="Auto" IsReadOnly="True" BorderThickness="3"
                                             ItemsSource2D="{Binding m_intArray}"/>

                        </Grid>
                    </Grid>

                </Grid>

            </controls:MetroTabItem>

            <controls:MetroTabItem Header="Добавление матрицы" Margin="5,0,0,0">
                <Grid   Background="#FFE5E5E5">
                    <Button Background="DimGray" Content="buttonxxx" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                </Grid>
                
            </controls:MetroTabItem>


        </controls:MetroTabControl>



    </Grid>



</controls:MetroWindow>